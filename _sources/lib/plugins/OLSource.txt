
.. currentmodule:: gxp.plugins

:class:`gxp.plugins.OLSource`
================================================================================


.. cssclass:: meta


Extends
    * `Ext.util.Observable <http://extjs.com/deploy/dev/docs/?class=Ext.util.Observable>`_
    * :class:`gxp.plugins.LayerSource`





ptype
    ``gxp_olsource``



.. class:: OLSource(config)

  Plugin for using any ``OpenLayers.Layer`` layers with :class:`gxp.Viewer`
  instances.

  Configuration for layers from a :class:`gxp.OLSource`:

  * type: ``String`` - the CLASS_NAME of an ``OpenLayers.Layer``
  * args: ``Array`` - the arguments passed to the layer's constructor



Example Use
-----------

The configuration in the ``sources`` property of the :class:`gxp.Viewer` is
straightforward:

.. code-block:: javascript

  "ol": {
      ptype: "gxp_olsource"
  }

A typical configuration for a layer from this source (in the ``layers``
array of the viewer's ``map`` config option would look like this:

.. code-block:: javascript

  {
      source: "ol",
      type: "OpenLayers.Layer.OSM"
      args: ["Mapnik"]
  }


    




Public Properties
-----------------

Public properties in addition to those
listed for `Ext.util.Observable <http://extjs.com/deploy/dev/docs/?class=Ext.util.Observable>`_.


.. attribute:: OLSource.store

    ``GeoExt.data.LayerStore``

.. attribute:: OLSource.title

    ``String``
    A descriptive title for this layer source.




Public Methods
--------------

Public methods in addition to those
listed for `Ext.util.Observable <http://extjs.com/deploy/dev/docs/?class=Ext.util.Observable>`_.


.. method:: OLSource.createLayerRecord

    :arg config:  ``Object``  The application config for this layer.
    :returns: ``GeoExt.data.LayerRecord``
    
    Create a layer record given the config.

.. method:: OLSource.createStore

    Creates a store of layer records.  Fires "ready" when store is loaded.

.. method:: OLSource.getConfigForRecord

    :arg record: :class:`GeoExt.data.LayerRecord`
    :returns: ``Object``
    
    Create a config object that can be used to recreate the given record.

.. method:: OLSource.getProjection

    :arg layerRecord: ``GeoExt.data.LayerRecord`` a record from this
        source's store
    :returns: ``OpenLayers.Projection`` A suitable projection for the
        ``layerRecord``. If the layer is available in the map projection,
        the map projection will be returned. Otherwise an equal projection,
        or null if none is available.
    
    Get the projection that the source will use for the layer created in
    ``createLayerRecord``. If the layer is not available in a projection
    that fits the map projection, null will be returned.

.. method:: OLSource.init

    :arg target: ``Object`` The object initializing this plugin.
    
    Calls :meth:`createStore` with a callback that fires the 'ready' event.




Events
------

Events in addition to those
listed for `Ext.util.Observable <http://extjs.com/deploy/dev/docs/?class=Ext.util.Observable>`_.


.. describe:: failure

    Fires if the layer source fails to load.

.. describe:: ready

    Fires when the layer source is ready for action.



