<!DOCTYPE html>
<html debug="true">
  <head>
    <script src="http://extjs.cachefly.net/ext-3.3.0/adapter/ext/ext-base.js"></script>
    <script src="http://extjs.cachefly.net/ext-3.3.0/ext-all-debug.js"></script>
    <script type="text/javascript" src="../../../../openlayers/lib/OpenLayers.js"></script>
    <script type="text/javascript" src="../../../../geoext/lib/GeoExt.js"></script>
    <script type="text/javascript" src="../../../src/script/loader.js"></script>

    <script type="text/javascript">
       
        function test_Tool(t) {
            t.plan(2);
            
            var instance = new gxp.plugins.Tool({id: "foo"});
            
            t.ok(instance instanceof gxp.plugins.Tool, "Instance created successfully");
            t.eq(instance.id, "foo", "Instance has id from config");
        }
        
        function test_init(t) {
            t.plan(3);
            
            var tool = new gxp.plugins.Tool({
                listeners: {
                    activate: function() {  
                        t.ok(true, "Activate event is fired");
                    } 
                }
            });
            var target = {tools: {}, on: function(){}};
            tool.init(target);
            t.ok(target.tools[tool.id] === tool, "tool registered on target");
            t.ok(tool.active === true, "tool is automatically activated");
        }

        function test_autoActivate(t) {
            t.plan(1);
            var tool = new gxp.plugins.Tool({autoActivate: false});
            var target = {tools: {}, on: function(){}};
            tool.init(target);
            t.ok(tool.active === false, "tool is not automatically activated when autoActivate is false");
        }

    </script>
  </head>
  <body>
  </body>
</html>
